<!DOCTYPE html>
<html dir="ltr" lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
            name="keywords"
            content="wrappixel, admin dashboard, html css dashboard, web dashboard, bootstrap 5 admin, bootstrap 5, css3 dashboard, bootstrap 5 dashboard, Matrix lite admin bootstrap 5 dashboard, frontend, responsive bootstrap 5 admin template, Matrix admin lite design, Matrix admin lite dashboard bootstrap 5 dashboard template"
    />
    <meta
            name="description"
            content="Matrix Admin Lite Free Version is powerful and clean admin dashboard template, inpired from Bootstrap Framework"
    />
    <meta name="robots" content="noindex,nofollow" />
    <title>Matrix Admin Lite Free Versions Template by WrapPixel</title>
    <link
            rel="icon"
            type="image/png"
            sizes="16x16"

            href="/admin_static/assets/images/favicon.png"
    />
    <link
            rel="stylesheet"
            type="text/css"
            href="/admin_static/assets/extra-libs/multicheck/multicheck.css"
    />
    <link
            href="/admin_static/assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.css"
            rel="stylesheet"
    />
    <link href="/admin_static/dist/css/style.min.css" rel="stylesheet" />
    <link
            rel="stylesheet"
            type="text/css"
            href="/admin_static/assets/libs/quill/dist/quill.snow.css"
    />
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <style>
        .preview-img {
            max-width: 100%;
            max-height: 200px;
            object-fit: cover;
        }
        .image-container {
            border: 1px solid #ddd;
            padding: 10px;
            margin-top: 10px;
            display: none; /* 초기에는 숨김 */
            cursor: pointer; /* 클릭 가능하게 커서 변경 */
        }
        .image-placeholder {
            width: 30%;
            height: 500px;
            border: 1px solid #5e5e5e;
            color: #5e5e5e;
            margin-bottom: 20px;
            position: relative; /* 자식 요소를 절대 위치로 배치하기 위해 필요 */
        }
        .image-placeholder img {
            max-width: 100%;
            max-height: 100%;
            position: absolute; /* 이미지가 네모 안에 위치하도록 설정 */
            top: 0;
            left: 0;
            object-fit: cover; /* 이미지 비율 유지 */
        }
        div.col-md-6 {
            width:90%;
        }
        div.card{
            border-radius: 15px;
        }
        div.card > h2 {
            margin: 0 auto;
            padding: 30px 0;
        }
        div.card div.flex_box {
            display: flex;
            justify-content: center;
            justify-items: center;
            gap: 80px;
        }
        div.info_box{
            width: 20%;
        }
        div.info_box > select{
            width: 60%;
        }
        div.ql-snow {
            margin: 0 auto;
            width: 55%;
        }
        div#editor {
            margin: 0 auto;
            height: 300px;
            width: 55%;
        }
        div.price_box {
            margin: 0 auto;
            width:55%
        }
        div.price_box input {
            width: 200px;
        }
        div.price_box > div.input_box {
            display: flex;
        }
        div.price_box > div.input_box > span {
            padding: 15px 0 0 10px;
            height: 0;
            font-size: 14px;
        }
    </style>
</head>

<body>
<div class="preloader">
    <div class="lds-ripple">
        <div class="lds-pos"></div>
        <div class="lds-pos"></div>
    </div>
</div>
<div
        id="main-wrapper"
        data-layout="vertical"
        data-navbarbg="skin5"
        data-sidebartype="full"
        data-sidebar-position="absolute"
        data-header-position="absolute"
        data-boxed-layout="full"
>
    <header class="topbar" data-navbarbg="skin5">
        <nav class="navbar top-navbar navbar-expand-md navbar-dark">
            <div class="navbar-header" data-logobg="skin5">
                <a class="navbar-brand" href="index.html">
                    <b class="logo-icon ps-2">
                        <img
                                src="/admin_static/assets/images/logo-icon.png"
                                alt="homepage"
                                class="light-logo"
                                width="25"
                        />
                    </b>
                    <span class="logo-text ms-2">
                <img
                        src="/admin_static/assets/images/logo-text.png"
                        alt="homepage"
                        class="light-logo"
                />
              </span>
                </a>
                <a
                        class="nav-toggler waves-effect waves-light d-block d-md-none"
                        href="javascript:void(0)"
                ><i class="ti-menu ti-close"></i
                ></a>
            </div>
            <div
                    class="navbar-collapse collapse"
                    id="navbarSupportedContent"
                    data-navbarbg="skin5"
            >
                <ul class="navbar-nav float-start me-auto">
                    <li class="nav-item d-none d-lg-block">
                        <a
                                class="nav-link sidebartoggler waves-effect waves-light"
                                href="javascript:void(0)"
                                data-sidebartype="mini-sidebar"
                        ><i class="mdi mdi-menu font-24"></i
                        ></a>
                    </li>
                    <li class="nav-item dropdown">
                        <a
                                class="nav-link dropdown-toggle"
                                href="#"
                                id="navbarDropdown"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                        >
                  <span class="d-none d-md-block"
                  >Create New <i class="fa fa-angle-down"></i
                  ></span>
                            <span class="d-block d-md-none"
                            ><i class="fa fa-plus"></i
                            ></span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><hr class="dropdown-divider" /></li>
                            <li>
                                <a class="dropdown-item" href="#">Something else here</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item search-box">
                        <a
                                class="nav-link waves-effect waves-dark"
                                href="javascript:void(0)"
                        ><i class="mdi mdi-magnify fs-4"></i
                        ></a>
                        <form class="app-search position-absolute">
                            <input
                                    type="text"
                                    class="form-control"
                                    placeholder="Search &amp; enter"
                            />
                            <a class="srh-btn"><i class="mdi mdi-window-close"></i></a>
                        </form>
                    </li>
                </ul>
                <ul class="navbar-nav float-end">
                    <li class="nav-item dropdown">
                        <a
                                class="nav-link dropdown-toggle"
                                href="#"
                                id="navbarDropdown"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                        >
                            <i class="mdi mdi-bell font-24"></i>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><hr class="dropdown-divider" /></li>
                            <li>
                                <a class="dropdown-item" href="#">Something else here</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a
                                class="nav-link dropdown-toggle waves-effect waves-dark"
                                href="#"
                                id="2"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                        >
                            <i class="font-24 mdi mdi-comment-processing"></i>
                        </a>
                        <ul
                                class="
                    dropdown-menu dropdown-menu-end
                    mailbox
                    animated
                    bounceInDown
                  "
                                aria-labelledby="2"
                        >
                            <ul class="list-style-none">
                                <li>
                                    <div class="">
                                        <!-- Message -->
                                        <a href="javascript:void(0)" class="link border-top">
                                            <div class="d-flex no-block align-items-center p-10">
                            <span
                                    class="
                                btn btn-success btn-circle
                                d-flex
                                align-items-center
                                justify-content-center
                              "
                            ><i class="mdi mdi-calendar text-white fs-4"></i
                            ></span>
                                                <div class="ms-2">
                                                    <h5 class="mb-0">Event today</h5>
                                                    <span class="mail-desc"
                                                    >Just a reminder that event</span
                                                    >
                                                </div>
                                            </div>
                                        </a>
                                        <!-- Message -->
                                        <a href="javascript:void(0)" class="link border-top">
                                            <div class="d-flex no-block align-items-center p-10">
                            <span
                                    class="
                                btn btn-info btn-circle
                                d-flex
                                align-items-center
                                justify-content-center
                              "
                            ><i class="mdi mdi-settings fs-4"></i
                            ></span>
                                                <div class="ms-2">
                                                    <h5 class="mb-0">Settings</h5>
                                                    <span class="mail-desc"
                                                    >You can customize this template</span
                                                    >
                                                </div>
                                            </div>
                                        </a>
                                        <!-- Message -->
                                        <a href="javascript:void(0)" class="link border-top">
                                            <div class="d-flex no-block align-items-center p-10">
                            <span
                                    class="
                                btn btn-primary btn-circle
                                d-flex
                                align-items-center
                                justify-content-center
                              "
                            ><i class="mdi mdi-account fs-4"></i
                            ></span>
                                                <div class="ms-2">
                                                    <h5 class="mb-0">Pavan kumar</h5>
                                                    <span class="mail-desc"
                                                    >Just see the my admin!</span
                                                    >
                                                </div>
                                            </div>
                                        </a>
                                        <!-- Message -->
                                        <a href="javascript:void(0)" class="link border-top">
                                            <div class="d-flex no-block align-items-center p-10">
                            <span
                                    class="
                                btn btn-danger btn-circle
                                d-flex
                                align-items-center
                                justify-content-center
                              "
                            ><i class="mdi mdi-link fs-4"></i
                            ></span>
                                                <div class="ms-2">
                                                    <h5 class="mb-0">Luanch Admin</h5>
                                                    <span class="mail-desc"
                                                    >Just see the my new admin!</span
                                                    >
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </li>
                            </ul>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a
                                class="
                    nav-link
                    dropdown-toggle
                    text-muted
                    waves-effect waves-dark
                    pro-pic
                  "
                                href="#"
                                id="navbarDropdown"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                        >
                            <img
                                    src="/admin_static/assets/images/users/1.jpg"
                                    alt="user"
                                    class="rounded-circle"
                                    width="31"
                            />
                        </a>
                        <ul
                                class="dropdown-menu dropdown-menu-end user-dd animated"
                                aria-labelledby="navbarDropdown"
                        >
                            <a class="dropdown-item" href="javascript:void(0)"
                            ><i class="mdi mdi-account me-1 ms-1"></i> My Profile</a
                            >
                            <a class="dropdown-item" href="javascript:void(0)"
                            ><i class="mdi mdi-wallet me-1 ms-1"></i> My Balance</a
                            >
                            <a class="dropdown-item" href="javascript:void(0)"
                            ><i class="mdi mdi-email me-1 ms-1"></i> Inbox</a
                            >
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="javascript:void(0)"
                            ><i class="mdi mdi-settings me-1 ms-1"></i> Account
                                Setting</a
                            >
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="javascript:void(0)"
                            ><i class="fa fa-power-off me-1 ms-1"></i> Logout</a
                            >
                            <div class="dropdown-divider"></div>
                            <div class="ps-4 p-10">
                                <a
                                        href="javascript:void(0)"
                                        class="btn btn-sm btn-success btn-rounded text-white"
                                >View Profile</a
                                >
                            </div>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <aside class="left-sidebar" data-sidebarbg="skin5" th:replace="admin/fragments/sidebar :: sidebar">

    </aside>
    <div class="page-wrapper">
        <div class="page-breadcrumb">
            <div class="row">
                <div class="col-12 d-flex no-block align-items-center">
                    <h4 class="page-title">구독 상품 등록</h4>
                    <div class="ms-auto text-end">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">
                                    Library
                                </li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">

            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs" role="tablist">
                            <li class="nav-item">
                                <a
                                        class="nav-link active"
                                        data-bs-toggle="tab"
                                        href="#home"
                                        role="tab"
                                ><span class="hidden-sm-up"></span>
                                    <span class="hidden-xs-down">3개월</span></a
                                >
                            </li>
                            <li class="nav-item">
                                <a
                                        class="nav-link"
                                        data-bs-toggle="tab"
                                        href="#profile"
                                        role="tab"
                                ><span class="hidden-sm-up"></span>
                                    <span class="hidden-xs-down">12개월</span></a
                                >
                            </li>
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content tabcontent-border">
                            <div class="tab-pane active" id="home" role="tabpanel">
                                <div class="p-20">

                                </div>
                            </div>
                            <div class="tab-pane p-20" id="profile" role="tabpanel">
                                <div class="p-20">
                                    <form id="productForm" th:action="@{/admin_static/registProduct}" method="post" enctype="multipart/form-data">
                                        <input type="hidden" id="attachOriginName" name="attach_origin_name">
                                        <input type="hidden" id="attachName" name="attach_name">
                                        <input type="hidden" name="info" id="info">
                                        <div class="flex_box">
                                            <div class="image-placeholder" id="imagePlaceholder">
                                                상품 이미지를 클릭하여 등록하세요
                                                <input type="file" id="productImage"  name="file" accept="image/*" style="display: none;">
                                            </div>

                                            <div class="info_box">
                                                <label for="name" class="form-label">구독상품명</label>
                                                <input type="text" class="form-control" id="name" name="name" required>

                                                <label for="product_id" class="form-label">상품선택</label>
                                                <select class="form-select" id="product_id" name="subcategory_id" required>
                                                    <option value="" disabled selected></option>
                                                </select>

                                            </div>
                                        </div>
                                        <div id="editor" style="height: 300px" name="info">
                                        </div>
                                        <div class="price_box">
                                            <label for="name" class="form-label">정상가</label>
                                            <div class="input_box">
                                                <input type="text" class="form-control" id="regularPrice" name="regular_price" required>
                                                <span>(단위 : 원)</span>
                                            </div>
                                            <label for="name" class="form-label">할인율</label>
                                            <div class="input_box">
                                                <input type="text" class="form-control" id="discountPercent" name="discount_percent" required>
                                                <span>(단위 : 원)</span>
                                            </div>
                                            <label for="name" class="form-label">판매가</label>
                                            <div class="input_box">
                                                <input type="text" class="form-control" id="salePrice" name="sale_price" required>
                                                <span>(단위 : 원)</span>
                                            </div>
                                        </div>

                                        <div class="button_box">
                                            <button type="submit" class="btn btn-primary">등록하기</button>
                                            <button class="btn btn-primary">목록으로</button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<script src="/admin_static/assets/libs/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap tether Core JavaScript -->
<script src="/admin_static/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<!-- slimscrollbar scrollbar JavaScript -->
<script src="/admin_static/assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
<script src="/admin_static/assets/extra-libs/sparkline/sparkline.js"></script>
<!--Wave Effects -->
<script src="/admin_static/dist/js/waves.js"></script>
<!--Menu sidebar -->
<script src="/admin_static/dist/js/sidebarmenu.js"></script>
<!--Custom JavaScript -->
<script src="/admin_static/dist/js/custom.min.js"></script>
<!-- this page js -->
<script src="/admin_static/assets/extra-libs/multicheck/datatable-checkbox-init.js"></script>
<script src="/admin_static/assets/extra-libs/multicheck/jquery.multicheck.js"></script>
<script src="/admin_static/assets/extra-libs/DataTables/datatables.min.js"></script>
<script src="/admin_static/assets/libs/quill/dist/quill.min.js"></script>
<script>
    $("#zero_config").DataTable();

        var quill = new Quill("#editor", {
        theme: "snow",
    });


        // 박스클릭하면 이미지 노출시키는 트리거
        // 네모 박스를 클릭하면 파일 입력을 트리거
        document.getElementById('imagePlaceholder').addEventListener('click', function() {
        document.getElementById('productImage').click();
    });

        // 파일 입력이 변경되면 이미지 미리보기
        document.getElementById('productImage').addEventListener('change', function(event) {
        const file = event.target.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
        const img = document.createElement('img'); // 새로운 이미지 요소 생성
        img.src = e.target.result; // 파일의 데이터 URL 설정
        const placeholder = document.getElementById('imagePlaceholder');
        placeholder.append(img); // 이미지 추가
    }
        if (file) {
        console.log("파일이 있다.");
        document.getElementById('attachName').value = file.name;
        document.getElementById('attachOriginName').value = file.name;
        console.log(file);
        reader.readAsDataURL(file);

    }
    });
        document.addEventListener('DOMContentLoaded', function() {
        const regularPriceInput = document.getElementById('regularPrice');
        const discountPercentInput = document.getElementById('discountPercent');
        const salePriceInput = document.getElementById('salePrice');
        function calculateSalePrice() {

        const regularPrice = parseFloat(regularPriceInput.value);
        const discountPercent = parseFloat(discountPercentInput.value);

            if (!isNaN(regularPrice) && !isNaN(discountPercent)) {
            const discountAmount = (regularPrice * discountPercent) / 100;
            const salePrice = regularPrice - discountAmount;
            salePriceInput.value = Math.floor(salePrice);
            } else {
                salePriceInput.value = '';
            }
    }

        regularPriceInput.addEventListener('input', calculateSalePrice);
        discountPercentInput.addEventListener('input', calculateSalePrice);
    });
        document.getElementById("productForm").onsubmit = function(event) {
        var infoInput = document.getElementById("info");
        infoInput.value = quill.root.innerHTML;
    };





</script>
</body>
</html>
